apiVersion: apps.gitlab.com/v1beta1
kind: GitLab
metadata:
  name: gitlab
spec:
  chart:
    version: "6.10.0" # https://gitlab.com/gitlab-org/cloud-native/gitlab-operator/-/blob/0.8.1/CHART_VERSIONS
    values:
      global:
        edition: ce
        hosts:
          domain: andrewpjackson.com # use a real domain here
        ingress:
          enabled: true
          class: nginx
          configureCertmanager: false
          tls:
            enabled: true
            secretName: andrewpjackson.com-tls
        certmanager-issuer:
          email: dorkmeisterx69@gmail.com # use your real email address here
        omniauth:
          enabled: true
          autoSignInWithProvider:
          syncProfileFromProvider: ['saml']
          syncProfileAttributes: ['email']
          allowSingleSignOn: ['saml']
          blockAutoCreatedUsers: false
          autoLinkLdapUser: false
          autoLinkSamlUser: true
          autoLinkUser: ['saml']
          externalProviders: []
          allowBypassTwoFactor: []
          providers:
            name: saml
            label: 'authentik'
            args:
              assertion_consumer_service_url: 'https://gitlab.andrewpjackson.com/users/auth/saml/callback'
              idp_cert_fingerprint: '06:b0:d9:03:32:7e:f6:03:2b:fb:37:8b:0d:62:82:18:f0:41:92:06'
              idp_sso_target_url: 'https://authentik.andrewpjackson.com/application/saml/gitlab/sso/binding/redirect/'
              issuer: 'https://gitlab.andrewpjackson.com'
              name_identifier_format: 'urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress'